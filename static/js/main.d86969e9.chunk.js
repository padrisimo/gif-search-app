(this.webpackJsonpgiphapp=this.webpackJsonpgiphapp||[]).push([[0],{28:function(e,t,n){e.exports=n(56)},33:function(e,t,n){},56:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),i=n(20),o=n.n(i),c=(n(33),n(7)),u=n.n(c),d=n(4),l=n(21),s=n.n(l),f=function(e){return e.map((function(e){return{columns:e.columns,imageWidth:e.imageWidth,gutter:e.gutter}})).reverse()},m=function(e){var t=f(e);return t.slice(0,t.length-1)},g=function(e){var t=f(e);return t[t.length-1]},p=function(e){return e.map((function(e){return e.mq&&"(min-width: ".concat(e.mq,")")})).filter((function(e){return null!=e})).reverse()},h="9Ixlv3DWC1biJRI57RanyL7RTbfzz0o7",b=[{mq:"480px",columns:1,imageWidth:480,gutter:1},{mq:"600px",columns:2,imageWidth:280,gutter:3},{mq:"700px",columns:3,imageWidth:200,gutter:5},{mq:"900px",columns:4,imageWidth:180,gutter:5},{mq:"1280px",columns:6,imageWidth:200,gutter:9}],v=40,E={apiUrl:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=t?"search":"trending";return"https://api.giphy.com/v1/gifs/".concat(n,"?api_key=").concat(h,"&limit=").concat(v,"&rating=g&offset=").concat(e,"&q=").concat(t)}},w=n(22),y=n.n(w),O=n(9),j=n(5),_=function(e,t){var n=t.payload,a=t.pagination;switch(t.type){case"FETCH_INIT":return Object(j.a)({},e,{loading:!0,error:!1,lastPage:!1,data:[]});case"FETCH_MORE_INIT":return Object(j.a)({},e,{loading:!0,error:!1,lastPage:!1});case"FETCH_SUCCESS":return Object(j.a)({},e,{loading:!1,error:!1,data:n,lastPage:a.total_count-a.offset<=a.count});case"FETCH_MORE_SUCCESS":return Object(j.a)({},e,{loading:!1,error:!1,data:[].concat(Object(O.a)(e.data),Object(O.a)(n)),lastPage:a.total_count-a.offset<=a.count});case"FETCH_FAILURE":return Object(j.a)({},e,{loading:!1,error:!0,lastPage:!1});default:throw new Error("Unknown action type")}},x=function(){var e=Object(a.useReducer)(_,{loading:!1,error:!1,data:[],lastPage:!1}),t=Object(d.a)(e,2),n=t[0],r=t[1];return[n,function(e,t){r(t?{type:"FETCH_MORE_INIT"}:{type:"FETCH_INIT"}),y.a.get(e).then((function(e){r(t?{type:"FETCH_MORE_SUCCESS",payload:e.data.data,pagination:e.data.pagination}:{type:"FETCH_SUCCESS",payload:e.data.data,pagination:e.data.pagination})})).catch((function(){r({type:"FETCH_FAILURE"})}))}]};var C=n(2),S=n(3);function I(){var e=Object(C.a)(["\n  background: tomato;\n  position: fixed;\n  width: 100%;\n  z-index: 1;\n  padding: .5rem;\n"]);return I=function(){return e},e}var k=S.a.form(I());function T(){var e=Object(C.a)(["\n  cursor: pointer;\n  background: transparent;\n  border: 1px solid white;\n  border-radius: 25px;\n  color: white;\n  padding: 1rem 4rem;\n  margin-left: 1rem;\n\n  &:hover:enabled {\n    background: white;\n    color: tomato;\n  }\n  &:disabled {\n    color: lightgrey;\n    border-color: lightgrey;\n    cursor: not-allowed;\n  }\n"]);return T=function(){return e},e}var q=S.a.button(T()),H=function(e){var t=e.title,n=e.onHandleSubmit,a=e.query;return r.a.createElement(q,{"data-testid":"Button",type:"submit",onClick:n,disabled:!a},t)};function F(){var e=Object(C.a)(["\n  padding: 1.5em;\n  border: 0;\n  border-radius: 25px;\n"]);return F=function(){return e},e}var z=S.a.input(F()),R=function(e){var t=e.onHandleQuery,n=e.query;return r.a.createElement(z,{value:n,onChange:t,placeholder:"search gif",type:"text",name:"query","data-testid":"SearchInput",required:!0})};function U(){var e=Object(C.a)(["\n    height: 70px;\n\n"]);return U=function(){return e},e}var W=S.a.div(U());function L(){var e=Object(C.a)(["\n  min-height: 100vh;\n  width: 100vw;\n  display: flex;\n  align-items: center;\n  flex-direction:column;\n"]);return L=function(){return e},e}var M=S.a.div(L());function P(){var e=Object(C.a)(["\n  display: block;\n  width: 100%;\n  height: auto;\n"]);return P=function(){return e},e}function B(){var e=Object(C.a)(["\n  background: tomato;\n  color: inherit;\n  border: none;\n  padding: 0;\n  font: inherit;\n  cursor: pointer;\n  outline: inherit;\n  width: ","px;\n  height: ","px;\n  overflow: hidden;\n  &:focus {\n    opacity: 0.6;\n  }\n\n"]);return B=function(){return e},e}var N=S.a.button(B(),(function(e){return e.size}),(function(e){var t=e.size,n=e.item;return n.images.fixed_width_downsampled.height*t/n.images.fixed_width_downsampled.width})),J=S.a.img(P()),A=function(e){var t=e.item,n=e.size,a=e.onSelect;return r.a.createElement(N,{"data-testid":"ImageItemButton",type:"button",size:n,item:t,onClick:function(){return a(t)}},r.a.createElement(J,{"data-testid":"ImageItemImage",width:t.images.fixed_width_downsampled.width,height:t.images.fixed_width_downsampled.height,alt:t.title,src:t.images.fixed_width_downsampled.url}))},D=n(26),Q=function(e){var t=e.children,n=e.sizes,i=Object(a.useRef)(null);return Object(a.useEffect)((function(){var e=Object(D.a)({container:i.current,packed:"data-packed",sizes:n,position:!0});e.resize(!0),a.Children.count(t)>0&&e.pack()}),[t]),r.a.createElement("div",{ref:i,"data-testid":"BrickLayoutContainer"},t)};var G=function(){var e=Object(a.useState)(""),t=Object(d.a)(e,2),n=t[0],i=t[1],o=Object(a.useState)(!0),c=Object(d.a)(o,2),l=c[0],f=c[1],h=Object(a.useRef)(!0),w=x(),y=Object(d.a)(w,2),O=y[0],j=O.data,_=O.loading,C=O.lastPage,S=y[1];Object(a.useEffect)((function(){S(E.apiUrl(0,n)),h.current&&(h.current=!1,f(!1))}),[]);var I=function(e,t,n){var r=e.map((function(e){return window.matchMedia(e)})),i=function(){var e=r.findIndex((function(e){return e.matches}));return"undefined"!==typeof t[e]?t[e]:n},o=Object(a.useState)(i),c=Object(d.a)(o,2),u=c[0],l=c[1];return Object(a.useEffect)((function(){var e=function(){return l(i)};return r.forEach((function(t){return t.addListener(e)})),function(){return r.forEach((function(t){return t.removeListener(e)}))}}),[]),u}(p(b),m(b),g(b));return r.a.createElement(r.a.Fragment,null,r.a.createElement(k,null,r.a.createElement(R,{onHandleQuery:function(e){return i(e.target.value)},query:n}),r.a.createElement(H,{title:"Search",query:n,onHandleSubmit:function(e){return u.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return e.preventDefault(),t.next=3,u.a.awrap(S(E.apiUrl(0,n)));case 3:case"end":return t.stop()}}))}})),r.a.createElement(M,null,r.a.createElement(W,null),r.a.createElement(s.a,{pageStart:0,loadMore:function(e){return n&&S(E.apiUrl(e*v),n)},hasMore:!_&&!C,useWindow:!0,initialLoad:!1,loader:!l&&n&&r.a.createElement("div",{key:"loading",style:{color:"white"}},"loading...")},j.length>0&&r.a.createElement(Q,{sizes:b},j.map((function(e){return r.a.createElement(A,{item:e,size:I.imageWidth,key:e.id,onSelect:function(){return console.log(e)}})}))))))};o.a.render(r.a.createElement(G,null),document.getElementById("root"))}},[[28,1,2]]]);
//# sourceMappingURL=main.d86969e9.chunk.js.map